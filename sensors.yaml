
#------------------------------------------------------------------------------
# MTA SUBWAY
#------------------------------------------------------------------------------

  - platform: mta_subway
    line:
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      - 7
      - A
      - C
      - E
      - B
      - D
      - F
      - M
      - G
      - J
      - Z
      - L
      - N
      - Q
      - R
      - W
      - S
      - SI

#------------------------------------------------------------------------------
# WEATHER PREDICTION
#------------------------------------------------------------------------------
  - platform: yr

#------------------------------------------------------------------------------
# DARK SKY
#------------------------------------------------------------------------------
  - platform: darksky
    api_key: !secret sensor_dark_sky_api_key
    monitored_conditions:
      - summary
      - icon
      - nearest_storm_distance
      - precip_type
      - precip_intensity
      - precip_probability
      - precip_accumulation
      - temperature
      - apparent_temperature
      - dew_point
      - wind_speed
      - wind_bearing
      - cloud_cover
      - humidity
      - pressure
      - visibility
      - ozone
      - minutely_summary
      - hourly_summary
      - daily_summary
      - temperature_high
      - temperature_low
      - apparent_temperature_high
      - apparent_temperature_low
      - precip_intensity_max
      - uv_index

#------------------------------------------------------------------------------
# POLLEN
#------------------------------------------------------------------------------
  - platform: pollen
    zip_code: !secret sensor_pollen_zip_code
    monitored_conditions:
      - allergy_average_forecasted
      - allergy_average_historical
      - allergy_index_today
      - allergy_index_tomorrow
      - allergy_index_yesterday
      - disease_average_forecasted

#------------------------------------------------------------------------------
# MIFLORA
#------------------------------------------------------------------------------
#  - platform: miflora
#    mac: 'C4:7C:8D:66:2A:75'
#    name: Christmas Cactus
#    force_update: false
#    median: 3
#    monitored_conditions:
#      - moisture
#      - light
#      - temperature
#      - conductivity
#      - battery

#  - platform: miflora
#    mac: 'C4:7C:8D:66:37:01'
#    name: Snake Plant
#    force_update: false
#    median: 3
#    monitored_conditions:
#      - moisture
#      - light
#      - temperature
#      - conductivity
#      - battery

#  - platform: miflora
#    mac: 'C4:7C:8D:66:E9:E2'
#    name: Echeveria
#    force_update: false
#    median: 3
#    monitored_conditions:
#      - moisture
#      - light
#      - temperature
#      - conductivity
#      - battery

#------------------------------------------------------------------------------
# MIFLORA-MQTT
#------------------------------------------------------------------------------

  # African Violet
  #--------------------------------------------
  - platform: mqtt
    name: "african_violet_temperature"
    state_topic: "miflora/african_violet"
    unit_of_measurement: '°C'
    value_template: "{{ value_json.temperature }}"
  - platform: mqtt
    name: "african_violet_light_intensity"
    state_topic: "miflora/african_violet"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.light }}"
  - platform: mqtt
    name: "african_violet_moisture"
    state_topic: "miflora/african_violet"
    unit_of_measurement: '%'
    value_template: "{{ value_json.moisture }}"
  - platform: mqtt
    name: "african_violet_conductivity"
    state_topic: "miflora/african_violet"
    unit_of_measurement: 'µS/cm'
    value_template: "{{ value_json.conductivity }}"
  - platform: mqtt
    name: "african_violet_battery"
    state_topic: "miflora/african_violet"
    unit_of_measurement: '%'
    value_template: "{{ value_json.battery }}"

  # Christmas Cactus
  #--------------------------------------------
  - platform: mqtt
    name: "christmas_cactus_temperature"
    state_topic: "miflora/christmas_cactus"
    unit_of_measurement: '°C'
    value_template: "{{ value_json.temperature }}"
  - platform: mqtt
    name: "christmas_cactus_light_intensity"
    state_topic: "miflora/christmas_cactus"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.light }}"
  - platform: mqtt
    name: "christmas_cactus_moisture"
    state_topic: "miflora/christmas_cactus"
    unit_of_measurement: '%'
    value_template: "{{ value_json.moisture }}"
  - platform: mqtt
    name: "christmas_cactus_conductivity"
    state_topic: "miflora/christmas_cactus"
    unit_of_measurement: 'µS/cm'
    value_template: "{{ value_json.conductivity }}"
  - platform: mqtt
    name: "christmas_cactus_battery"
    state_topic: "miflora/christmas_cactus"
    unit_of_measurement: '%'
    value_template: "{{ value_json.battery }}"

  # Golden Pothos
  #--------------------------------------------
  - platform: mqtt
    name: "golden_pothos_temperature"
    state_topic: "miflora/golden_pothos"
    unit_of_measurement: '°C'
    value_template: "{{ value_json.temperature }}"
  - platform: mqtt
    name: "golden_pothos_light_intensity"
    state_topic: "miflora/golden_pothos"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.light }}"
  - platform: mqtt
    name: "golden_pothos_moisture"
    state_topic: "miflora/golden_pothos"
    unit_of_measurement: '%'
    value_template: "{{ value_json.moisture }}"
  - platform: mqtt
    name: "golden_pothos_conductivity"
    state_topic: "miflora/golden_pothos"
    unit_of_measurement: 'µS/cm'
    value_template: "{{ value_json.conductivity }}"
  - platform: mqtt
    name: "golden_pothos_battery"
    state_topic: "miflora/golden_pothos"
    unit_of_measurement: '%'
    value_template: "{{ value_json.battery }}"

  # Snake Plant
  #--------------------------------------------
  - platform: mqtt
    name: "snake_plant_temperature"
    state_topic: "miflora/snake_plant"
    unit_of_measurement: '°C'
    value_template: "{{ value_json.temperature }}"
  - platform: mqtt
    name: "snake_plant_light_intensity"
    state_topic: "miflora/snake_plant"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.light }}"
  - platform: mqtt
    name: "snake_plant_moisture"
    state_topic: "miflora/snake_plant"
    unit_of_measurement: '%'
    value_template: "{{ value_json.moisture }}"
  - platform: mqtt
    name: "snake_plant_conductivity"
    state_topic: "miflora/snake_plant"
    unit_of_measurement: 'µS/cm'
    value_template: "{{ value_json.conductivity }}"
  - platform: mqtt
    name: "snake_plant_battery"
    state_topic: "miflora/snake_plant"
    unit_of_measurement: '%'
    value_template: "{{ value_json.battery }}"

#------------------------------------------------------------------------------
# ZIGBEE2MQTT
#------------------------------------------------------------------------------

 # Xiaomi Door Sensor
 #--------------------------------------------
  - platform: "mqtt"
    name: "Front Door"
    state_topic: "zigbee2mqtt/front_door_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:door"
    value_template: "{% if value_json.contact == True %}Closed{% elif value_json.contact == False %}Open{% endif %}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

 # Xiaomi Motion Sensor - Bedroom
 #--------------------------------------------
  - platform: "mqtt"
    name: "Bedroom Motion"
    state_topic: "zigbee2mqtt/bedroom_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:run-fast"
    value_template: "{{ value_json.occupancy }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

  - platform: "mqtt"
    name: "Bedroom Illuminance"
    state_topic: "zigbee2mqtt/bedroom_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:theme-light-dark"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.illuminance }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

 # Xiaomi Motion Sensor - Living Room
 #--------------------------------------------
  - platform: "mqtt"
    name: "Living Room Motion"
    state_topic: "zigbee2mqtt/living_room_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:run-fast"
    value_template: "{{ value_json.occupancy }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

  - platform: "mqtt"
    name: "Living Room Illuminance"
    state_topic: "zigbee2mqtt/living_room_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:theme-light-dark"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.illuminance }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

 # Xiaomi Motion Sensor - Office
 #--------------------------------------------
  - platform: "mqtt"
    name: "Office Motion"
    state_topic: "zigbee2mqtt/office_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:run-fast"
    value_template: "{{ value_json.occupancy }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

  - platform: "mqtt"
    name: "Office Illuminance"
    state_topic: "zigbee2mqtt/office_motion_sensor"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:theme-light-dark"
    unit_of_measurement: 'lx'
    value_template: "{{ value_json.illuminance }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

 # Xiaomi Magic Cube
 #--------------------------------------------
  - platform: "mqtt"
    name: "Magic Cube"
    state_topic: "zigbee2mqtt/mi_cube"
    availability_topic: "zigbee2mqtt/bridge/state"
    icon: "mdi:cube-outline"
    value_template: "{{ value_json.action }}"
    json_attributes_topic: "zigbee2mqtt/living_room_grow_light"

#------------------------------------------------------------------------------
# SONOFF POW
#------------------------------------------------------------------------------

 # Living Room AC
 #--------------------------------------------
  - platform: mqtt
    state_topic: 'sonoff_pow_001/sensor/voltage/state'
    unit_of_measurement: 'V'
    name: 'Living Room AC Voltage'

  - platform: mqtt
    state_topic: 'sonoff_pow_001/sensor/current/state'
    unit_of_measurement: 'A'
    name: 'Living Room AC Current'

  - platform: mqtt
    state_topic: 'sonoff_pow_001/sensor/power/state'
    unit_of_measurement: 'W'
    name: 'Living Room AC Power'

#------------------------------------------------------------------------------
# PRESENCE
#------------------------------------------------------------------------------

 # Living Room
 #--------------------------------------------
  - platform: mqtt
    state_topic: 'presence/living_room/D8:8F:76:D2:23:75'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Mickey iPhone Living Room Presence'

  - platform: mqtt
    state_topic: 'presence/living_room/38:89:2C:1E:B9:98'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Maggie iPhone Living Room Presence'

  - platform: mqtt
    state_topic: 'presence/living_room/D0:33:11:0C:84:1B'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Junie iPhone Living Room Presence'

 # Bedroom
 #--------------------------------------------
  - platform: mqtt
    state_topic: 'presence/bedroom/D8:8F:76:D2:23:75'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Mickey iPhone Bedroom Presence'

  - platform: mqtt
    state_topic: 'presence/bedroom/38:89:2C:1E:B9:98'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Maggie iPhone Bedroom Presence'

  - platform: mqtt
    state_topic: 'presence/bedroom/D0:33:11:0C:84:1B'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Junie iPhone Bedroom Presence'

 # Office          
 #--------------------------------------------
  - platform: mqtt
    state_topic: 'presence/office/D8:8F:76:D2:23:75'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Mickey iPhone Office Presence'

  - platform: mqtt
    state_topic: 'presence/office/38:89:2C:1E:B9:98'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Maggie iPhone Office Presence'

  - platform: mqtt
    state_topic: 'presence/office/D0:33:11:0C:84:1B'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Junie iPhone Office Presence'

 # Overall Home         
 #--------------------------------------------

  - platform: min_max
    name: "Mickey iPhone Overall Presence"
    type: mean
    round_digits: 0
    entity_ids:
      - sensor.mickey_iphone_living_room_presence
      - sensor.mickey_iphone_bedroom_presence
      - sensor.mickey_iphone_office_presence

  - platform: min_max
    name: "Maggie iPhone Overall Presence"
    type: mean
    round_digits: 0
    entity_ids:
      - sensor.maggie_iphone_living_room_presence
      - sensor.maggie_iphone_bedroom_presence
      - sensor.maggie_iphone_office_presence     

  - platform: min_max
    name: "Junie iPhone Overall Presence"
    type: mean
    round_digits: 0
    entity_ids:
      - sensor.junie_iphone_living_room_presence
      - sensor.junie_iphone_bedroom_presence
      - sensor.junie_iphone_office_presence

 # Work         
 #--------------------------------------------
  - platform: mqtt
    state_topic: 'presence/viacom/D8:8F:76:D2:23:75'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'Mickey iPhone Viacom Presence'

#------------------------------------------------------------------------------
# Glances
#------------------------------------------------------------------------------

 # Brick         
 #--------------------------------------------
  - platform: glances
    host: 192.168.1.222
    name: Brick
    resources:
      - 'disk_use_percent'
      - 'disk_use'
      - 'disk_free'
      - 'memory_use_percent'
      - 'memory_use'
      - 'memory_free'
      - 'swap_use_percent'
      - 'swap_use'
      - 'swap_free'
      - 'processor_load'
      - 'process_running'
      - 'process_total'
      - 'process_thread'
      - 'process_sleeping'
      - 'cpu_temp'
      - 'docker_active'
      - 'docker_cpu_use'
      - 'docker_memory_use'
